(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[912],{3e3:(e,s,r)=>{Promise.resolve().then(r.bind(r,8127))},8127:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>o});var a=r(5155),n=r(2115),d=r(5695),t=r(3464);function o(){let e=(0,d.useRouter)(),[s,r]=(0,n.useState)({username:"",email:"",password:"",confirmPassword:""}),[o,i]=(0,n.useState)(""),[l,c]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1),[g,p]=(0,n.useState)(null),b=e=>{let{name:s,value:a}=e.target;r(e=>({...e,[s]:a}))},x=async r=>{if(r.preventDefault(),c(!0),i(""),p(null),s.password!==s.confirmPassword){i("Passwords do not match"),p({type:"error",message:"Passwords do not match"}),c(!1);return}try{let r=await t.A.post("https://api.lutui.in/tp/register",{username:s.username,email:s.email,password:s.password});r.data.success?(m(!0),p({type:"success",message:"Admin account created successfully! Redirecting to login page..."}),setTimeout(()=>{e.push("/admin/login")},3e3)):(i(r.data.message||"Failed to create admin account"),p({type:"error",message:r.data.message||"Failed to create admin account"}))}catch(s){var a,n;let e=(null==(n=s.response)||null==(a=n.data)?void 0:a.message)||"An error occurred during setup";i(e),p({type:"error",message:e})}finally{c(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Create Admin Account"}),g&&(0,a.jsx)("div",{className:"border px-4 py-3 rounded mb-4 ".concat("success"===g.type?"bg-green-100 border-green-400 text-green-700":"bg-red-100 border-red-400 text-red-700"),children:g.message}),!g&&o&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:o}),u?(0,a.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:"Admin account created successfully! Redirecting to login page..."}):(0,a.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,a.jsx)("input",{id:"username",name:"username",type:"text",value:s.username,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",value:s.email,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",value:s.password,onChange:b,required:!0,minLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),(0,a.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:s.confirmPassword,onChange:b,required:!0,minLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:l,className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-300",children:l?"Creating Account...":"Create Admin Account"})})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[794,441,303,358],()=>s(3e3)),_N_E=e.O()}]);